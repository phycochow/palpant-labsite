<!-- tab-enrichment.html -->
<div class="well">
  <h4>How To Use The Enrichment Browser</h4>
  <ul>
      <li><strong>Step 1:</strong> Select a target parameter/outcome from the dropdown menu (e.g., "Best Contractile Force" or "Disease Modeling").</li>
      <li><strong>Step 2:</strong> Review the enrichment results table showing protocol features significantly associated with your selected outcome.</li>
      <li><strong>Step 3:</strong> Use the "Filter records" search box to narrow down results by specific terms or values.</li>
      <li><strong>Important Note:</strong> The enrichment analysis may include protocols that don't directly report your selected metric. This is intentional and part of the data mining approach—we analyze which features are statistically overrepresented across the entire dataset, even in studies that measure related but different outcomes.</li>
      <li><strong>Results Explanation:</strong>
          <ul>
              <li>Target Label: The outcome you selected</li>
              <li>Feature: Specific protocol component or characteristic</li>
              <li>Importance: Statistical measure of association strength</li>
              <li>P-value: Statistical significance (lower values = stronger evidence)</li>
              <li>Category: Which experimental domain the feature belongs to</li>
          </ul>
      </li>
      <li><strong>Data Source:</strong> Results are derived from our comprehensive database of 322 hiPSC-CM protocols using advanced statistical techniques.</li>
      <li><strong>Export:</strong> Use the "Export CSV" button to download results for your own analysis.</li>
  </ul>
</div>

&nbsp;

<!-- Full-width form container with flex layout removed -->
<div class="enrichment-form-container">
  <form id="parameter-form">
    <div class="enrichment-form-group">
      <label for="parameter-dropdown" class="enrichment-label">Select Target Parameter:</label>
      <select id="parameter-dropdown" name="category" class="enrichment-select">
        <option value="">-- Select a Category --</option>
        {% for category in TargetParameters %}
          <option value="{{ category }}">{{ category }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="enrichment-form-group">
      <label class="enrichment-label">Select Features:</label>
      <div id="parameter-container" class="enrichment-checkbox-container enrichment-hidden">
        <p>Please select a category first...</p>
      </div>
      <div class="enrichment-selection-summary" id="parameter-summary"></div>
    </div>
  </form>
</div>

<!-- Submit button -->
<div class="enrichment-submit-container">
  <button id="enrichment-submit-button" class="enrichment-button" disabled>Find Enrichments</button>
</div>

<!-- ↑→ New “debug” UI, copied from Search tab style →↓ -->
<div class="well">
  <div id="enrichment-result-display" class="enrichment-hidden">
    <h3>Submission Result:</h3>
    <pre id="enrichment-submission-result" class="enrichment-pre"></pre>
  </div>
</div>

<!-- DataTable results (hidden until data is loaded) -->
<div class="enrichment-results">
  <div id="enrichment-table-container" class="enrichment-hidden">
    <table
      id="enrichment-data-table"
      class="table table-striped table-bordered table-compact"
      style="width:100%">
    </table>
  </div>
</div>

